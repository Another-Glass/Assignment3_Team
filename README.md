<div align="center">

  # 원티드 백엔드 프리온보딩 2차 과제 - 프레시코드

  <img height="400" width="700" src="https://user-images.githubusercontent.com/59385491/139865333-05dabf0a-e283-4e51-94d9-8a42e6acbb7b.jpeg">


  <h2> 👨‍💻 원티드 프리온보딩 어나더글라스 팀입니다. </h2>

<p>6명의 안경잡이 개발자들의 시선과 관점이 담긴 과제입니다.</p>
<p>무던히 포기하지 않고 견디고 견뎠던 그 시간들이 변함없는 단 하나의 해답임을 믿습니다.</p>

</div>


<div align=center>

<img alt="PRs Welcome" src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square" />
<img alt="Hits" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2FAnother-Glass%2FAssignment1_Team1%2Fblob%2Fdevelop%2FREADME.md&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false" />
<img alt="issues" src="https://img.shields.io/github/issues/Another-Glass/Assignment1_Team1" />


</div>

</br>
</br>
</br>
</br>
</br>
</br>

## 🎤 소개

이 레포지토리는 [원티드 프리온보딩 백엔드 코스](https://www.wanted.co.kr/events/pre_onboarding_course_4) 2차 과제를 위해 만들어졌습니다. 

-   일정 : 2021년 11월 4일(목) 오후 6시 ~ 11월 6일(토) 오전 10시

<br>
<br>

<div align='center'>

## 🧑🏻‍💻 팀원 소개

| **팀장 박상수** | **팀원 김성연** | **팀원 최준호** |
|:-----:|:-----:|:-----: |
|  <img src="https://avatars.githubusercontent.com/u/59385491?v=4" height=200 width=200> | <img src="https://avatars.githubusercontent.com/u/38933716?v=4" height=200 width=200> |<img src="https://avatars.githubusercontent.com/u/67402180?v=4" height=200 width=200>  |
| **blog**: [Plus Ultra](https://overcome-the-limits.tistory.com/) </br> **github**: [epitone](https://github.com/epitoneproject)| **blog**: [sudocorp](https://sudocorp.tistory.com/) </br> **github**: [SibaDoge1](https://github.com/SibaDoge1)| **blog**: [raejun92.log](https://velog.io/@raejun92) </br> **github**: [raejun92](https://github.com/raejun92)
| ![sprint2](https://img.shields.io/badge/wanted-sprint2-orange) |![sprint2](https://img.shields.io/badge/wanted-sprint2-orange)  | ![sprint2](https://img.shields.io/badge/wanted-sprint2-orange) |
| 단위 테스트 | DevOps, API, DB | API |
| [프로젝트 회고](https://overcome-the-limits.tistory.com/entry/%ED%9A%8C%EA%B3%A0-%EC%9B%90%ED%8B%B0%EB%93%9C-%ED%94%84%EB%A6%AC%EC%98%A8%EB%B3%B4%EB%94%A9-%EB%B0%B1%EC%97%94%EB%93%9C-%EC%BD%94%EC%8A%A4-2%EC%B0%A8-%EA%B3%BC%EC%A0%9C) | [프로젝트 회고](https://sudocorp.tistory.com/3) | [프로젝트 회고](https://velog.io/@raejun92/Assignment2-%ED%94%84%EB%A0%88%EC%8B%9C%EC%BD%94%EB%93%9C)

<br>
<br>

|                       **팀원 어유선**                        |                       **팀원 김현길**                        |                       **팀원 이동훈**                        |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| <img src="https://avatars.githubusercontent.com/u/32833404?v=4" height=200 width=200> | <img src="https://avatars.githubusercontent.com/u/48472537?v=4" height=200 width=200> | <img src="https://avatars.githubusercontent.com/u/68373235?v=4" height=200 width=200> |
| **blog**: [Makkiato](https://makkiato.tistory.com) </br> **github**: [Makkiato](https://github.com/Makkiato) | **blog**: [gusrlf14](https://velog.io/@gusrlf14) </br> **github**: [hyunghilkim](https://github.com/hyunghilkim) | **blog**: [dongjay00.log](https://velog.io/@dongjay00) </br> **github**: [dongjay00](https://github.com/dongjay00) |
| ![sprint2](https://img.shields.io/badge/wanted-sprint2-orange) | ![sprint2](https://img.shields.io/badge/wanted-sprint2-orange) | ![sprint2](https://img.shields.io/badge/wanted-sprint2-orange) |
|                     통합 테스트                     |                             API                              |                              DB                              |
|                      [프로젝트 회고](https://makkiato.tistory.com/3)                       |                      [프로젝트 회고](https://velog.io/@gusrlf14/%EC%9B%90%ED%8B%B0%EB%93%9C-%EC%9C%84%EC%BD%94%EB%93%9C-%ED%94%84%EB%A6%AC%EC%98%A8%EB%B3%B4%EB%94%A9-%EB%B0%B1%EC%97%94%EB%93%9C-2%ED%9A%8C%EC%B0%A8-%EA%B3%BC%EC%A0%9C-%ED%9A%8C%EA%B3%A0)                       | [프로젝트 회고](https://velog.io/@dongjay00/%ED%94%84%EB%A6%AC%EC%98%A8%EB%B3%B4%EB%94%A9-%EB%91%90%EB%B2%88%EC%A7%B8-%EA%B3%BC%EC%A0%9C-%ED%9A%8C%EA%B3%A0) |


</div>

<br>
<br>
<br>

## 📕 과제 내용

### [필수 포함 사항]

- Swagger나 Postman을 이용하여 API 테스트 가능하도록 구현
- README 작성
    - 프로젝트 빌드, 자세한 실행 방법 명시
    - 구현 방법과 이유에 대한 간략한 설명
    - 완료된 시스템이 배포된 서버의 주소
    - Swagger나 Postman을 통한 API 테스트할때 필요한 상세 방법
    - 해당 과제를 진행하면서 회고 내용 블로그 포스팅

</br>


### [개발 요구사항]

- Database RDBMS
- JWT 인증방식 사용
- 서비스 실행 시 데이터베이스 또는 In Memory 상에 유저와 상품 최소한 5개를 미리 생성
- Request시 Header에 Authorization 키를 체크
- Authorization 키의 값이 없거나 인증 실패시 적절한 Error Handling
- 상품 추가/수정/삭제는 admin 권한을 가진 사용자만 이용 가능
- 상품 조회는 하나 또는 전체목록을 조회할 수 있으며, 전체목록은 페이징 기능 존재
- 한 페이지 당 아이템 수 5개
- 사용자는 상품 조회만 가능
- 관리자만 상품 추가/수정/삭제
- 상품 관리 API 개발시 적절한 Error Handling
- 유닛 테스트 구현

</br>
</br>

## 📕 과제 해결 방안

- Node.js, express, MySQL, sequelize를 활용해서 CRUD API, 회원가입 로그인 API, 상품 CRUD를 구현했습니다.
- 인증, 인가를 위해 JWT를 활용했습니다.
- 코드 컨벤션, 커밋 컨벤션, Git Flow를 지켜가며 작업했습니다.
- Github Project, 마일스톤을 활용해서 백로그, 이슈 관리를 진행했습니다.
- 계층 분리를 통해 코드의 가독성을 높였습니다.
- 리팩토링을 통해 가독성을 높이고, 유지보수를 편하게 하기 위해 노력 했습니다.
- 유닛테스트와 통합테스트를 개발하여 개발자가 의도한대로 로직이 동작하는지 명확하게 알 수 있고 로직에 대해 보증하기 위해 노력했습니다.

</br>
</br>

## 💡 구현 기능

### [회원가입, 로그인]

- 회원가입시 password 같은 민감정보는 단방향 해쉬 알고리즘인 `crypto`를 이용해서 암호화 하여 database에 저장하였습니다.
- 로그인이 성공적으로 완료되면, user정보를 토큰으로 반환할때, 양방향 해쉬 알고리즘인 `JWT`를 사용해서 응답을 하였습니다.

<br>

### [상품 CRUD]

- 관리자와 사용자를 구분하여, 일반 사용자는 상품 조회만 가능하게 제한하고, 관리자는 상품 추가, 수정, 삭제 권한을 주어 구현 하였습니다.
- 상품(Menu) 조회시, items , tags를 함께 조회가 가능하게 구현 하였습니다.
- 상품 페이지를 불러올때 1page당 limit5로 하여 페이징를 구현 하였습니다. 
- 클라이언트 요청시 정보 누락 및 부족으로 인한 에러 처리, 인증관련 에러처리를 구현 하였습니다.

<br>

### [ 단위테스트 / 통합테스트 ]

- jest를 활용해서 단위 테스트를 구현했습니다. 
- faker.js 라이브러리를 활용해서 seed data를 생성했습니다.
- 통합 테스트를 구현해서 실제 사용자와 관리자가 보일만한 패턴을 시나리오로 작성해서 활용하고자 노력했습니다.

<br>

### [ 에러 핸들링 ]

- 자바스크립트 자체 내장 Error 클래스를 상속 받아서, 커스텀 에러를 생성해서 관리했습니다.

</br>
</br>

## ➿ 모델링

</br>

<div align=center>
<img src="https://user-images.githubusercontent.com/48472537/140530312-82780cf3-3cc6-4ded-98d1-529b0944ed0b.png" height=650>
</div>


</br>
</br>

## 🛠 실행 방법

- 레포지토리를 clone 받거나, 압축을 해제한 후 npm install을 통해 환경 셋팅을 진행합니다.
- npm start를 통해 서버를 구동합니다.
- src 폴더에 .env 파일을 설정해서, 환경변수를 설정합니다.
- npm start로 서버를 구동시키고, npm test를 입력하면 단위 테스트가 가능합니다.

- <details><summary><b>.env 파일 설정 방법</b></summary>

  ```
  RDS_DATABASE=
  RDS_USERNAME=
  RDS_PASSWORD=
  RDS_HOSTNAME=
  RDS_PORT=
  PORT=
  JWT_SECERT=
  JWT_ALGO=
  ADMIN_USER=
  ADMIN_PASSWORD=
  HOST=
  ```

</details>


</br>
</br>


## 🗂 과제 확인 및 평가 API 명세서

- Postman을 활용하여 API 작동 테스트를 진행했습니다. 
- __배포된 서버 주소__ 및 자세한 API 명세는 아래에서 확인 가능합니다.
- [🗂 API Description Link](https://documenter.getpostman.com/view/18068137/UVC2J9gg)

</br>
</br>


## 😎 컨벤션 설정

- [👏🏻 협업을 위한 코드 컨벤션 설정하기](https://overcome-the-limits.tistory.com/entry/%ED%98%91%EC%97%85-%ED%98%91%EC%97%85%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%BD%94%EB%93%9C-%EC%BB%A8%EB%B2%A4%EC%85%98-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0)

- [👏🏻 Prettier, ESLint, Airbnb Style Guide로 코드 컨벤션  설정하기](https://overcome-the-limits.tistory.com/entry/%ED%98%91%EC%97%85-ESLint-Prettier-Airbnb-Style-Guide%EB%A1%9C-%EC%BD%94%EB%93%9C-%EC%BB%A8%EB%B2%A4%EC%85%98-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0?category=911197)


- [👏🏻 협업을 위한 git 커밋 컨벤션 설정하기](https://overcome-the-limits.tistory.com/entry/%ED%98%91%EC%97%85-%ED%98%91%EC%97%85%EC%9D%84-%EC%9C%84%ED%95%9C-%EA%B8%B0%EB%B3%B8%EC%A0%81%EC%9D%B8-git-%EC%BB%A4%EB%B0%8B%EC%BB%A8%EB%B2%A4%EC%85%98-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0?category=911197)

- [👏🏻 협업을 위한 Git Flow 설정하기](https://overcome-the-limits.tistory.com/entry/%ED%98%91%EC%97%85-%ED%98%91%EC%97%85%EC%9D%84-%EC%9C%84%ED%95%9C-Git-Flow-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0?category=911197)

- [👏🏻 협업을 위한 Git 명령어 가이드](https://overcome-the-limits.tistory.com/entry/%ED%98%91%EC%97%85-%ED%98%91%EC%97%85%EC%9D%84-%EC%9C%84%ED%95%9C-Git-%EB%AA%85%EB%A0%B9%EC%96%B4-%EA%B0%80%EC%9D%B4%EB%93%9C?category=911197) 

</br>
</br>


## 🛠 Dependencies

</br>

<div align=center>
<img src="https://user-images.githubusercontent.com/59385491/140558426-f0c6b7bc-06c0-4f7f-8944-a5b5540dbbc4.png" height=850>
</div>


</br>
</br>


## 🌲 File Tree

</br>


```

📦src
 ┣ 📂bin
 ┃ ┗ 📜www.js
 ┣ 📂configs
 ┃ ┣ 📜db.js
 ┃ ┣ 📜index.js
 ┃ ┗ 📜secretKey.js
 ┣ 📂controllers
 ┃ ┣ 📜itemController.js
 ┃ ┣ 📜menuController.js
 ┃ ┣ 📜tagController.js
 ┃ ┗ 📜userController.js
 ┣ 📂globals
 ┃ ┣ 📜index.js
 ┃ ┣ 📜responseMessage.js
 ┃ ┣ 📜routes.js
 ┃ ┗ 📜statusCode.js
 ┣ 📂libs
 ┃ ┣ 📜encryption.js
 ┃ ┗ 📜jwt.js
 ┣ 📂middlewares
 ┃ ┗ 📜auth.js
 ┣ 📂models
 ┃ ┣ 📜index.js
 ┃ ┣ 📜item.js
 ┃ ┣ 📜menu.js
 ┃ ┣ 📜tag.js
 ┃ ┗ 📜user.js
 ┣ 📂routes
 ┃ ┣ 📜globalRouter.js
 ┃ ┣ 📜index.js
 ┃ ┣ 📜menuRouter.js
 ┃ ┣ 📜tagRouter.js
 ┃ ┣ 📜tokenRouter.js
 ┃ ┗ 📜userRouter.js
 ┣ 📂services
 ┃ ┣ 📜itemService.js
 ┃ ┣ 📜menuService.js
 ┃ ┣ 📜tagService.js
 ┃ ┗ 📜userService.js
 ┣ 📂test
 ┃ ┣ 📂Menu
 ┃ ┃ ┣ 📜createMenu.test.js
 ┃ ┃ ┣ 📜deleteMenu.test.js
 ┃ ┃ ┣ 📜getMenu.test.js
 ┃ ┃ ┣ 📜getMenuList.test.js
 ┃ ┃ ┗ 📜putMenu.test.js
 ┃ ┣ 📂Tag
 ┃ ┃ ┣ 📜deleteTag.test.js
 ┃ ┃ ┣ 📜getTag.test.js
 ┃ ┃ ┣ 📜postTag.test.js
 ┃ ┃ ┗ 📜putTag.test.js
 ┃ ┗ 📂User
 ┃ ┃ ┣ 📜signin.test.js
 ┃ ┃ ┗ 📜signup.test.js
 ┣ 📂utils
 ┃ ┣ 📂errors
 ┃ ┃ ┣ 📜errors.js
 ┃ ┃ ┣ 📜menuError.js
 ┃ ┃ ┣ 📜tagError.js
 ┃ ┃ ┗ 📜userError.js
 ┃ ┣ 📜index.js
 ┃ ┣ 📜logger.js
 ┃ ┗ 📜resFormatter.js
 ┣ 📜.eslintrc.json
 ┣ 📜.gitignore
 ┣ 📜.prettierrc.json
 ┣ 📜app.js
 ┗ 📜package.json

```
